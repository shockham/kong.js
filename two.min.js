var Entity=function(a,b,d,f,e,c){this.x=a;this.y=b;this.Width=f;this.Height=e;this.Speed=256;this.Type="";this.Alive=!0;this.Img=new Image;this.Img.onload=function(){this.Ready=!0};this.Img.src=d;this.Rotation=0;this.layer=c||0};Entity.prototype.update=function(){};Entity.prototype.draw=function(a){a.save();a.translate(this.x+this.Width/2,this.y+this.Height/2);a.rotate(this.Rotation);this.Img.Ready&&a.drawImage(this.Img,-(this.Width/2),-(this.Height/2),this.Width,this.Height);a.restore()};
var Textity=function(a,b,d,f,e,c){this.x=a;this.y=b;this.Text=d;this.Colour=f;this.Size=e;this.Alive=!0;this.layer=c||0};Textity.prototype.update=function(){};Textity.prototype.draw=function(a){a.font=this.Size+"px 'VT323'";a.fillStyle=this.Colour;a.fillText(this.Text,this.x,this.y)};var Rectity=function(a,b,d,f,e,c){this.x=a;this.y=b;this.Width=f;this.Height=e;this.Colour=d;this.Alive=!0;this.layer=c||0};Rectity.prototype.update=function(){};
Rectity.prototype.draw=function(a){a.fillStyle=this.Colour;a.fillRect(this.x,this.y,this.Width,this.Height)};var Linity=function(a,b,d,f,e,c){this.x=a;this.y=b;this.EndX=d;this.EndY=f;this.Width=e;this.Colour="#000000";this.Alive=!0;this.layer=c||0};Linity.prototype.update=function(){};Linity.prototype.draw=function(a){a.save();a.fillStyle=this.Colour;a.beginPath();a.moveTo(this.x,this.y);a.lineTo(this.EndX,this.EndY);a.lineWidth=this.Width;a.stroke();a.restore()};
var State=function(){this.Objects=[]};State.prototype.add=function(a){this.Objects[this.Objects.length]=a};State.prototype.remove=function(a){this.Objects.splice(this.Objects.indexOf(a),1)};State.prototype.update=function(a){for(obj in this.Objects)this.Objects[obj].Alive&&this.Objects[obj].update(a)};
State.prototype.draw=function(){for(var a=[],b=0;2>=b;b++)a.push(document.getElementById("game_canvas_"+b).getContext("2d")),a[b].clearRect(0,0,a[b].canvas.width,a[b].canvas.height);for(obj in this.Objects)this.Objects[obj].Alive&&this.Objects[obj].draw(a[this.Objects[obj].layer])};var Game=function(a,b,d,f){this.width=a;this.height=b;for(var e=0;2>=e;e++)this.add_canvas(e,a,b,d,f);this.State=new State};
Game.prototype.add_canvas=function(a,b,d,f,e){var c=document.createElement("canvas");c.id="game_canvas_"+a;c.width=b;c.height=d;c.style.width=f+"px";c.style.height=e+"px";c.style.position="absolute";c.style.backgroundColor="transparent";a=c.getContext("2d");a.font="40px Monofett";a.textBaseline="top";document.body.appendChild(c)};Game.prototype.update=function(a){this.State.update(a)};Game.prototype.draw=function(){this.State.draw()};
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();var _g_;Game.prototype.main=function(a){var b=Date.now(),d=b-then;this.draw();this.update(d/1E3);then=b;a&&(_g_=a);requestAnimFrame(function(){_g_.main()})};var then=Date.now();Game.prototype.start=function(){then=Date.now();this.main(this)};
Game.prototype.touching=function(a,b){return a.x<=b.x+b.Width&&b.x<=a.x+a.Width&&a.y<=b.y+b.Height&&b.y<=a.y+a.Height?!0:!1};var Music=function(a){this.music=document.createElement("audio");this.music.src=a;this.music2=document.createElement("audio");this.music2.src=a};Music.prototype.play=function(){this.music.play()};Music.prototype.loop=function(a){var b=this;this.music.play();setInterval(function(){b.music.play()},a);setInterval(function(){b.music2.play()},a)};var keysDown={};
addEventListener("keydown",function(a){keysDown[a.keyCode]=!0},!1);addEventListener("keyup",function(a){delete keysDown[a.keyCode]},!1);
